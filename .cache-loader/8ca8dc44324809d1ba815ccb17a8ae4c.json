{"remainingRequest":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js?cacheDirectory=true!D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\marker\\SWMarkerModule.js","dependencies":[{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\marker\\SWMarkerModule.js","mtime":1531378324665},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1526631545426},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js","mtime":1520329890000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global THREE,$*/\n\nvar _SWTool = require('../../tool/SWTool');\n\nvar _SWTextureAnimator = require('../../tool/SWTextureAnimator');\n\nvar _SWTextureAnimator2 = _interopRequireDefault(_SWTextureAnimator);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * 全景除了底层盒子、UI 都是标注\r\n * 这是所有标注的父类\r\n */\nvar SWMarkerModule = function () {\n    /**\r\n     * \r\n     * @param {String} url 图片链接地址\r\n     * @param {Number} type 1-静态 2-动态 \r\n     * @param {Object} obj {fpsNum:帧数，wPlane:宽，hPlane：高}\r\n     */\n    function SWMarkerModule(url, type, obj) {\n        _classCallCheck(this, SWMarkerModule);\n\n        this.markerType = type;\n\n        if (url) {\n            this.texture = new THREE.ImageUtils.loadTexture(url);\n        }\n\n        if (obj) {\n            this.textureAnimator = new _SWTextureAnimator2.default(this.texture, obj.fpsNum, 1, obj.fpsNum, 100);\n\n            this.geometry = new THREE.PlaneGeometry(obj.wPlane, obj.hPlane, 1, 1);\n\n            this.material = new THREE.MeshBasicMaterial({\n                map: this.texture,\n                side: 2,\n                transparent: true,\n                opacity: 1\n            });\n        } else {\n\n            this.geometry = new THREE.PlaneGeometry(1, 1, 1, 1);\n\n            this.material = new THREE.MeshBasicMaterial({ color: 0xffff00 });\n        }\n\n        this.mesh = new THREE.Mesh(this.geometry, this.material);\n\n        this.textDiv = new _SWTool.TextDiv(new THREE.Vector3(0, 0, 0), 12, \"\");\n        this.textDiv.id = \"markerMesh\";\n        this.textDiv.style.display = \"none\";\n        this.textDiv.style.color = \"#FFF\";\n        this.textDiv.style.borderRadius = \"3px\";\n        this.textDiv.style.backgroundColor = \"rgba(16, 16, 16, 0.3)\";\n        this.textDiv.style.padding = \"3px 10px\";\n        this.textDiv.style.letterSpacing = \"2px\";\n    }\n\n    /**\r\n     * 不停的更新动画\r\n     * @param {Number} delta 补帧时间\r\n     */\n\n\n    _createClass(SWMarkerModule, [{\n        key: 'update',\n        value: function update(delta) {\n            if (this.textureAnimator && this.markerType == 2) {\n\n                this.textureAnimator.update(1000 * delta);\n            }\n        }\n\n        /**\r\n         * 显示标注文本说明\r\n         * @param {Object} obj 射线返回对象\r\n         * @param {String} str 显示文本\r\n         */\n\n    }, {\n        key: 'showTextDiv',\n        value: function showTextDiv(obj, str) {\n            if (str && str != \"\") {\n\n                this.textDiv.style.display = \"block\";\n\n                var labelPos = (0, _SWTool.getWorldToScene)(obj.point);\n\n                this.textDiv.style.left = labelPos.x - 30 + \"px\";\n\n                this.textDiv.style.top = labelPos.y - 40 + \"px\";\n\n                this.textDiv.innerHTML = str;\n            }\n        }\n\n        /**隐藏标注说明文本 */\n\n    }, {\n        key: 'hideTextDiv',\n        value: function hideTextDiv() {\n\n            this.textDiv.style.display = \"none\";\n        }\n\n        /**清空对象 */\n\n    }, {\n        key: 'clear',\n        value: function clear() {\n\n            this.textureAnimator = null;\n\n            (0, _SWTool.delectTextDiv)(this.textDiv);\n\n            (0, _SWTool.disposeNode)(this.mesh);\n        }\n    }]);\n\n    return SWMarkerModule;\n}();\n\nexports.default = SWMarkerModule;",{"version":3,"sources":["app\\src\\module\\marker\\SWMarkerModule.js"],"names":["SWMarkerModule","url","type","obj","markerType","texture","THREE","ImageUtils","loadTexture","textureAnimator","SWTextureAnimator","fpsNum","geometry","PlaneGeometry","wPlane","hPlane","material","MeshBasicMaterial","map","side","transparent","opacity","color","mesh","Mesh","textDiv","TextDiv","Vector3","id","style","display","borderRadius","backgroundColor","padding","letterSpacing","delta","update","str","labelPos","point","left","x","top","y","innerHTML"],"mappings":"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","file":"SWMarkerModule.js","sourceRoot":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano","sourcesContent":["/* global THREE,$*/\r\n\r\nimport { disposeNode, TextDiv, getWorldToScene, delectTextDiv } from '../../tool/SWTool'\r\nimport SWTextureAnimator from '../../tool/SWTextureAnimator';\r\n\r\n/**\r\n * 全景除了底层盒子、UI 都是标注\r\n * 这是所有标注的父类\r\n */\r\nclass SWMarkerModule {\r\n    /**\r\n     * \r\n     * @param {String} url 图片链接地址\r\n     * @param {Number} type 1-静态 2-动态 \r\n     * @param {Object} obj {fpsNum:帧数，wPlane:宽，hPlane：高}\r\n     */\r\n    constructor(url, type, obj) {\r\n\r\n        this.markerType = type;\r\n\r\n        if (url) {\r\n            this.texture = new THREE.ImageUtils.loadTexture(url);\r\n        }\r\n\r\n        if (obj) {\r\n            this.textureAnimator = new SWTextureAnimator(this.texture, obj.fpsNum, 1, obj.fpsNum, 100);\r\n\r\n            this.geometry = new THREE.PlaneGeometry(obj.wPlane, obj.hPlane, 1, 1);\r\n\r\n            this.material = new THREE.MeshBasicMaterial({\r\n                map: this.texture,\r\n                side: 2,\r\n                transparent: true,\r\n                opacity: 1\r\n            });\r\n\r\n        } else {\r\n\r\n            this.geometry = new THREE.PlaneGeometry(1, 1, 1, 1);\r\n\r\n            this.material = new THREE.MeshBasicMaterial({ color: 0xffff00 });\r\n\r\n        }\r\n\r\n        this.mesh = new THREE.Mesh(this.geometry, this.material);\r\n\r\n        this.textDiv = new TextDiv(new THREE.Vector3(0, 0, 0), 12, \"\");\r\n        this.textDiv.id = \"markerMesh\";\r\n        this.textDiv.style.display = \"none\";\r\n        this.textDiv.style.color = \"#FFF\";\r\n        this.textDiv.style.borderRadius = \"3px\";\r\n        this.textDiv.style.backgroundColor = \"rgba(16, 16, 16, 0.3)\";\r\n        this.textDiv.style.padding = \"3px 10px\";\r\n        this.textDiv.style.letterSpacing = \"2px\";\r\n    }\r\n\r\n    /**\r\n     * 不停的更新动画\r\n     * @param {Number} delta 补帧时间\r\n     */\r\n    update(delta) {\r\n        if (this.textureAnimator && this.markerType == 2) {\r\n\r\n            this.textureAnimator.update(1000 * delta);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示标注文本说明\r\n     * @param {Object} obj 射线返回对象\r\n     * @param {String} str 显示文本\r\n     */\r\n    showTextDiv(obj, str) {\r\n        if (str && str != \"\") {\r\n\r\n            this.textDiv.style.display = \"block\";\r\n\r\n            var labelPos = getWorldToScene(obj.point);\r\n\r\n            this.textDiv.style.left = (labelPos.x - 30) + \"px\";\r\n\r\n            this.textDiv.style.top = (labelPos.y - 40) + \"px\";\r\n\r\n            this.textDiv.innerHTML = str;\r\n\r\n        }\r\n    }\r\n\r\n\r\n    /**隐藏标注说明文本 */\r\n    hideTextDiv() {\r\n\r\n        this.textDiv.style.display = \"none\";\r\n\r\n    }\r\n\r\n    /**清空对象 */\r\n    clear() {\r\n\r\n        this.textureAnimator = null;\r\n\r\n        delectTextDiv(this.textDiv);\r\n\r\n        disposeNode(this.mesh);\r\n    }\r\n}\r\n\r\nexport default SWMarkerModule;"]}]}