{"remainingRequest":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js?cacheDirectory=true!D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\panoBox\\SWBoxTilesModule.js","dependencies":[{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\panoBox\\SWBoxTilesModule.js","mtime":1537427063799},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1540192322431},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js","mtime":1520329890000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n        value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global THREE*/\n\nvar _SWConstants = require('../../tool/SWConstants');\n\nvar _SWTool = require('../../tool/SWTool');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * 全景盒子瓦片对象\r\n */\nvar SWBoxTilesModule = function () {\n        /**\r\n         * @param {Number} no 所属面编号\r\n         * @param {Number} x 行\r\n         * @param {Number} y 列\r\n         * @param {Object} meshparent 父类对象\r\n         * @param {THREE.Group} path 图片链接的前半截地址\r\n         */\n        function SWBoxTilesModule(no, x, y, meshparent, path) {\n                _classCallCheck(this, SWBoxTilesModule);\n\n                this.loadImageType = 0; //0-未加载图片 1-正在加载 2-加载成功 3-加载失败\n\n                this.faceNo = no;\n\n                this.row = x;\n\n                this.line = y;\n\n                this.meshParent = meshparent;\n\n                this.boxPath = path;\n\n                this.lineNum = 8;\n\n                this.planeW = _SWConstants.c_FaceDistance / this.lineNum;\n\n                this.geometry = new THREE.PlaneGeometry(this.planeW, this.planeW, 1, 1);\n\n                this.material = new THREE.MeshBasicMaterial({ map: null, depthTest: true });\n\n                this.mesh = new THREE.Mesh(this.geometry, this.material);\n\n                this.mesh.name = '\\u7F16\\u53F7:' + this.faceNo + '_' + this.row + '_' + this.line;\n\n                this.mesh.position.x = -_SWConstants.c_FaceDistance * 0.5 + this.planeW * 0.5 + (this.line - 1) * this.planeW;\n\n                this.mesh.position.y = _SWConstants.c_FaceDistance * 0.5 - this.planeW * 0.5 - (this.row - 1) * this.planeW;\n\n                this.mesh.position.z = 1;\n\n                this.mesh.userData.depthlevel = 100;\n\n                this.loadTilesTexture();\n        }\n\n        /**\r\n         * 加载瓦片贴图\r\n         */\n\n\n        _createClass(SWBoxTilesModule, [{\n                key: 'loadTilesTexture',\n                value: function loadTilesTexture() {\n                        var _this = this;\n\n                        var ss = (this.row - 1) * this.lineNum + this.line > 9 ? (this.row - 1) * this.lineNum + this.line : '0' + ((this.row - 1) * this.lineNum + this.line);\n\n                        var path = this.boxPath + '/4/sw_' + this.faceNo + '_' + ss + '.jpg';\n\n                        // 实例化一个加载器\n                        var loader = new THREE.TextureLoader();\n\n                        // 加载资源\n                        loader.load(\n                        // 资源URL\n                        path,\n                        // 加载成功之后调用\n                        function (texture) {\n\n                                _this.geometry.visible = true;\n\n                                texture.mapping = THREE.UVMapping;\n\n                                texture.magFilter = THREE.LinearFilter;\n\n                                texture.minFilter = THREE.LinearFilter;\n\n                                texture.type = THREE.FloatType;\n\n                                texture.anisotropy = 1;\n\n                                _this.mesh.material.map = texture;\n\n                                _this.mesh.material.map.needsUpdate = true;\n\n                                _this.loadImageType = 2;\n\n                                _this.meshParent.add(_this.mesh);\n                        },\n                        // 加载中\n                        function (xhr) {\n                                _this.loadImageType = 1;\n                        },\n                        // 加载失败\n                        function (xhr) {\n                                console.log('\\u56FE\\u7247\\u52A0\\u8F7D\\u5931\\u8D25\\uFF1A' + path);\n                                _this.loadImageType = 3;\n                        });\n                }\n        }, {\n                key: 'clearTile',\n                value: function clearTile() {\n\n                        (0, _SWTool.disposeNode)(this.mesh);\n                }\n        }]);\n\n        return SWBoxTilesModule;\n}();\n\nexports.default = SWBoxTilesModule;",{"version":3,"sources":["app\\src\\module\\panoBox\\SWBoxTilesModule.js"],"names":["SWBoxTilesModule","no","x","y","meshparent","path","loadImageType","faceNo","row","line","meshParent","boxPath","lineNum","planeW","c_FaceDistance","geometry","THREE","PlaneGeometry","material","MeshBasicMaterial","map","depthTest","mesh","Mesh","name","position","z","userData","depthlevel","loadTilesTexture","ss","loader","TextureLoader","load","texture","visible","mapping","UVMapping","magFilter","LinearFilter","minFilter","type","FloatType","anisotropy","needsUpdate","add","xhr","console","log"],"mappings":"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","file":"SWBoxTilesModule.js","sourceRoot":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano","sourcesContent":["/* global THREE*/\r\n\r\nimport { c_FaceDistance } from '../../tool/SWConstants'\r\nimport { disposeNode } from '../../tool/SWTool'\r\n/**\r\n * 全景盒子瓦片对象\r\n */\r\nclass SWBoxTilesModule {\r\n    /**\r\n     * @param {Number} no 所属面编号\r\n     * @param {Number} x 行\r\n     * @param {Number} y 列\r\n     * @param {Object} meshparent 父类对象\r\n     * @param {THREE.Group} path 图片链接的前半截地址\r\n     */\r\n    constructor(no, x, y, meshparent, path) {\r\n\r\n        this.loadImageType = 0; //0-未加载图片 1-正在加载 2-加载成功 3-加载失败\r\n\r\n        this.faceNo = no;\r\n\r\n        this.row = x;\r\n\r\n        this.line = y;\r\n\r\n        this.meshParent = meshparent;\r\n\r\n        this.boxPath = path;\r\n\r\n        this.lineNum = 8;\r\n\r\n        this.planeW = c_FaceDistance / this.lineNum;\r\n\r\n        this.geometry = new THREE.PlaneGeometry(this.planeW, this.planeW, 1, 1);\r\n\r\n        this.material = new THREE.MeshBasicMaterial({ map: null ,depthTest: true});\r\n\r\n        this.mesh = new THREE.Mesh(this.geometry, this.material);\r\n\r\n        this.mesh.name = `编号:${this.faceNo}_${this.row}_${this.line}`;\r\n\r\n        this.mesh.position.x = -c_FaceDistance * 0.5 + this.planeW * 0.5 + (this.line - 1) * this.planeW;\r\n\r\n        this.mesh.position.y = c_FaceDistance * 0.5 - this.planeW * 0.5 - (this.row - 1) * this.planeW;\r\n\r\n        this.mesh.position.z = 1;\r\n\r\n        this.mesh.userData.depthlevel = 100;\r\n\r\n        this.loadTilesTexture();\r\n    }\r\n\r\n    /**\r\n     * 加载瓦片贴图\r\n     */\r\n    loadTilesTexture() {\r\n\r\n        let ss = (((this.row - 1) * this.lineNum + this.line > 9) ? ((this.row - 1) * this.lineNum + this.line) : '0' + ((this.row - 1) * this.lineNum + this.line));\r\n\r\n        let path = `${this.boxPath}/4/sw_${(this.faceNo)}_${ss}.jpg`;\r\n\r\n        // 实例化一个加载器\r\n        let loader = new THREE.TextureLoader();\r\n\r\n        // 加载资源\r\n        loader.load(\r\n            // 资源URL\r\n            path,\r\n            // 加载成功之后调用\r\n            (texture) => {\r\n\r\n                this.geometry.visible = true;\r\n\r\n                texture.mapping = THREE.UVMapping;\r\n\r\n                texture.magFilter = THREE.LinearFilter;\r\n\r\n                texture.minFilter = THREE.LinearFilter;\r\n\r\n                texture.type = THREE.FloatType;\r\n\r\n                texture.anisotropy = 1;\r\n\r\n                this.mesh.material.map = texture;\r\n\r\n                this.mesh.material.map.needsUpdate = true;\r\n\r\n                this.loadImageType = 2;\r\n\r\n                this.meshParent.add(this.mesh);\r\n            },\r\n            // 加载中\r\n            (xhr) => {\r\n                this.loadImageType = 1;\r\n            },\r\n            // 加载失败\r\n            (xhr) => {\r\n                console.log(`图片加载失败：${path}`);\r\n                this.loadImageType = 3;\r\n            }\r\n        );\r\n    }\r\n\r\n    clearTile() {\r\n\r\n        disposeNode(this.mesh);\r\n\r\n    }\r\n}\r\n\r\nexport default SWBoxTilesModule;"]}]}