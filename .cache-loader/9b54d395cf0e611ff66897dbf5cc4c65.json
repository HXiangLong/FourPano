{"remainingRequest":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js!D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\eslint-loader\\index.js??ref--5-0!D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\panoBox\\SWBoxModule.js","dependencies":[{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\panoBox\\SWBoxModule.js","mtime":1529391398698},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\.babelrc","mtime":1526554899270},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1526631545426},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js","mtime":1520329890000},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\eslint-loader\\index.js","mtime":1519638534000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n        value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global THREE */\n\nvar _SWConstants = require('../../tool/SWConstants');\n\nvar _SWBoxFaceModule = require('./SWBoxFaceModule');\n\nvar _SWBoxFaceModule2 = _interopRequireDefault(_SWBoxFaceModule);\n\nvar _SWTool = require('../../tool/SWTool');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * 全景盒子\r\n */\nvar SWBoxModule = function () {\n        function SWBoxModule(url, textures) {\n                _classCallCheck(this, SWBoxModule);\n\n                this.box = new THREE.Group(); //全景内盒子\n\n                this.faceArr = []; //面集合\n\n                this.url = url; //贴图路径\n\n                this.textures = textures; //缩略贴图对象\n\n                this.box.rotation.y = THREE.Math.degToRad(90 - _SWConstants.c_StationInfo.yaw); //每个站点都有一个校正值\n\n                _SWConstants.scene.add(this.box);\n\n                this.addFace();\n        }\n\n        _createClass(SWBoxModule, [{\n                key: 'addFace',\n                value: function addFace() {\n                        var dd = Date.now();\n\n                        for (var i = 0; i < 6; i++) {\n\n                                var canvas = document.createElement(\"canvas\");\n\n                                canvas.width = canvas.height = _SWConstants.c_ThumbnailSize;\n\n                                var context = canvas.getContext(\"2d\");\n\n                                //计算图片位置\n                                var nint = Math.floor(i / 3);\n                                var mint = i % 3;\n\n                                context.drawImage(this.textures.image, mint * _SWConstants.c_ThumbnailSize, nint * _SWConstants.c_ThumbnailSize, _SWConstants.c_ThumbnailSize, _SWConstants.c_ThumbnailSize, 0, 0, _SWConstants.c_ThumbnailSize, _SWConstants.c_ThumbnailSize);\n\n                                var texture1 = new THREE.Texture(canvas);\n\n                                texture1.needsUpdate = true;\n\n                                var face = new _SWBoxFaceModule2.default(i, this.box, texture1, this.url);\n\n                                this.faceArr.push(face);\n                        }\n\n                        console.log('\\u7F29\\u7565\\u56FE\\u8D34\\u9762\\u4E0A\\u8017\\u65F6\\uFF1A' + (Date.now() - dd) + 'ms');\n                }\n        }, {\n                key: 'clearBox',\n                value: function clearBox() {\n\n                        this.faceArr.forEach(function (itme) {\n                                itme.clearTiles();\n                        });\n\n                        (0, _SWTool.disposeNode)(this.box);\n                }\n        }]);\n\n        return SWBoxModule;\n}();\n\nexports.default = SWBoxModule;",null]}