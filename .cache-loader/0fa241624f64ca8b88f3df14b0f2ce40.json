{"remainingRequest":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js?cacheDirectory=true!D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\marker\\SWMarkerTakePictureModule.js","dependencies":[{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\app\\src\\module\\marker\\SWMarkerTakePictureModule.js","mtime":1531470908058},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538971317145},{"path":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano\\node_modules\\babel-loader\\lib\\index.js","mtime":1520329890000}],"contextDependencies":[],"result":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n            value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* global THREE,$*/\n\n\nvar _SWMarkerMoreModule = require('./SWMarkerMoreModule');\n\nvar _SWMarkerMoreModule2 = _interopRequireDefault(_SWMarkerMoreModule);\n\nvar _SWDrawPoint = require('../draw/SWDrawPoint');\n\nvar _SWDrawPoint2 = _interopRequireDefault(_SWDrawPoint);\n\nvar _SWDrawLine = require('../draw/SWDrawLine');\n\nvar _SWDrawLine2 = _interopRequireDefault(_SWDrawLine);\n\nvar _SWTool = require('../../tool/SWTool');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * 绘制面标注\r\n */\nvar SWMarkerTakePictureModule = function () {\n            function SWMarkerTakePictureModule() {\n                        _classCallCheck(this, SWMarkerTakePictureModule);\n\n                        this.swDrawPoint = new _SWDrawPoint2.default();\n\n                        this.swMarkerMoreModule = new _SWMarkerMoreModule2.default();\n\n                        this.swDrawLine = new _SWDrawLine2.default();\n\n                        this.downPoint = new THREE.Vector2();\n\n                        this.upPoint = new THREE.Vector2();\n\n                        this.vpArr = [];\n            }\n\n            _createClass(SWMarkerTakePictureModule, [{\n                        key: 'addPoint',\n                        value: function addPoint(nx, ny, type) {\n\n                                    if (type === 1) {\n                                                //鼠标按下\n\n                                                this.downPoint.x = nx;\n\n                                                this.downPoint.y = ny;\n                                    } else if (type === 2) {\n                                                //鼠标弹起\n\n                                                this.upPoint.x = nx;\n\n                                                this.upPoint.y = ny;\n                                    }\n\n                                    if (this.upPoint.equals(this.downPoint)) {\n\n                                                var vp = (0, _SWTool.Vector3ToVP)((0, _SWTool.getSceneToWorld)(nx, ny));\n\n                                                this.vpArr.push({ yaw: vp._yaw, pitch: vp._pitch });\n\n                                                var poi = (0, _SWTool.VPToVector3)(vp);\n\n                                                this.swDrawPoint.drawPoint(poi);\n\n                                                this.swDrawLine.addPoint(poi, false);\n\n                                                if (this.vpArr.length > 3) {\n                                                            this.swMarkerMoreModule.clear();\n                                                            this.swMarkerMoreModule.createPolygon(this.vpArr);\n                                                }\n                                    }\n                        }\n            }]);\n\n            return SWMarkerTakePictureModule;\n}();\n\nexports.default = SWMarkerTakePictureModule;",{"version":3,"sources":["app\\src\\module\\marker\\SWMarkerTakePictureModule.js"],"names":["SWMarkerTakePictureModule","swDrawPoint","SWDrawPoint","swMarkerMoreModule","SWMarkerMoreModule","swDrawLine","SWDrawLine","downPoint","THREE","Vector2","upPoint","vpArr","nx","ny","type","x","y","equals","vp","push","yaw","_yaw","pitch","_pitch","poi","drawPoint","addPoint","length","clear","createPolygon"],"mappings":";;;;;;qjBAAA;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACA;;;IAGMA,yB;AACF,iDAAc;AAAA;;AAEV,6BAAKC,WAAL,GAAmB,IAAIC,qBAAJ,EAAnB;;AAEA,6BAAKC,kBAAL,GAA0B,IAAIC,4BAAJ,EAA1B;;AAEA,6BAAKC,UAAL,GAAkB,IAAIC,oBAAJ,EAAlB;;AAEA,6BAAKC,SAAL,GAAiB,IAAIC,MAAMC,OAAV,EAAjB;;AAEA,6BAAKC,OAAL,GAAe,IAAIF,MAAMC,OAAV,EAAf;;AAEA,6BAAKE,KAAL,GAAa,EAAb;AACH;;;;iDAEQC,E,EAAIC,E,EAAIC,I,EAAM;;AAEnB,wCAAIA,SAAS,CAAb,EAAgB;AAAE;;AAEd,qDAAKP,SAAL,CAAeQ,CAAf,GAAmBH,EAAnB;;AAEA,qDAAKL,SAAL,CAAeS,CAAf,GAAmBH,EAAnB;AAEH,qCAND,MAMO,IAAIC,SAAS,CAAb,EAAgB;AAAE;;AAErB,qDAAKJ,OAAL,CAAaK,CAAb,GAAiBH,EAAjB;;AAEA,qDAAKF,OAAL,CAAaM,CAAb,GAAiBH,EAAjB;AAEH;;AAED,wCAAI,KAAKH,OAAL,CAAaO,MAAb,CAAoB,KAAKV,SAAzB,CAAJ,EAAyC;;AAErC,oDAAIW,KAAK,yBAAY,6BAAgBN,EAAhB,EAAoBC,EAApB,CAAZ,CAAT;;AAEA,qDAAKF,KAAL,CAAWQ,IAAX,CAAgB,EAAEC,KAAKF,GAAGG,IAAV,EAAgBC,OAAOJ,GAAGK,MAA1B,EAAhB;;AAEA,oDAAIC,MAAM,yBAAYN,EAAZ,CAAV;;AAEA,qDAAKjB,WAAL,CAAiBwB,SAAjB,CAA2BD,GAA3B;;AAEA,qDAAKnB,UAAL,CAAgBqB,QAAhB,CAAyBF,GAAzB,EAA8B,KAA9B;;AAEA,oDAAI,KAAKb,KAAL,CAAWgB,MAAX,GAAoB,CAAxB,EAA2B;AACvB,iEAAKxB,kBAAL,CAAwByB,KAAxB;AACA,iEAAKzB,kBAAL,CAAwB0B,aAAxB,CAAsC,KAAKlB,KAA3C;AAEH;AACJ;AACJ;;;;;;kBAEUX,yB","file":"SWMarkerTakePictureModule.js","sourceRoot":"D:\\02数文\\WebProject\\NodeAllProject\\FourPano","sourcesContent":["/* global THREE,$*/\r\nimport SWMarkerMoreModule from './SWMarkerMoreModule';\r\nimport SWDrawPoint from '../draw/SWDrawPoint';\r\nimport SWDrawLine from '../draw/SWDrawLine';\r\nimport { Vector3ToVP, getSceneToWorld, VPToVector3 } from '../../tool/SWTool';\r\n/**\r\n * 绘制面标注\r\n */\r\nclass SWMarkerTakePictureModule {\r\n    constructor() {\r\n\r\n        this.swDrawPoint = new SWDrawPoint();\r\n\r\n        this.swMarkerMoreModule = new SWMarkerMoreModule();\r\n\r\n        this.swDrawLine = new SWDrawLine();\r\n\r\n        this.downPoint = new THREE.Vector2();\r\n\r\n        this.upPoint = new THREE.Vector2();\r\n\r\n        this.vpArr = [];\r\n    }\r\n\r\n    addPoint(nx, ny, type) {\r\n\r\n        if (type === 1) { //鼠标按下\r\n\r\n            this.downPoint.x = nx;\r\n\r\n            this.downPoint.y = ny;\r\n\r\n        } else if (type === 2) { //鼠标弹起\r\n\r\n            this.upPoint.x = nx;\r\n\r\n            this.upPoint.y = ny;\r\n\r\n        }\r\n\r\n        if (this.upPoint.equals(this.downPoint)) {\r\n\r\n            let vp = Vector3ToVP(getSceneToWorld(nx, ny));\r\n\r\n            this.vpArr.push({ yaw: vp._yaw, pitch: vp._pitch });\r\n\r\n            let poi = VPToVector3(vp);\r\n\r\n            this.swDrawPoint.drawPoint(poi);\r\n\r\n            this.swDrawLine.addPoint(poi, false);\r\n\r\n            if (this.vpArr.length > 3) {\r\n                this.swMarkerMoreModule.clear();\r\n                this.swMarkerMoreModule.createPolygon(this.vpArr);\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\nexport default SWMarkerTakePictureModule;"]}]}